<div class="dashboard-container">
  
  <!-- Stats Cards Row -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of statCards">
      <div class="stat-icon" [style.background-color]="stat.iconBg">
        <i [class]="stat.icon"></i>
      </div>
      <div class="stat-content">
        <span class="stat-title">{{ stat.title }}</span>
        <h2 class="stat-value">{{ stat.value }}</h2>
      </div>
      <div class="stat-change" [class.positive]="stat.isPositive">
        <i class="pi pi-arrow-up" *ngIf="stat.isPositive"></i>
        <i class="pi pi-arrow-down" *ngIf="!stat.isPositive"></i>
        <span>{{ stat.change }}</span>
      </div>
    </div>
  </div>


  <!-- Chart and CTA Row -->
  <div class="chart-row">
    
    <!-- Revenue Analytics Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <h3>Revenue Analytics</h3>
          <p>Monthly sales performance</p>
        </div>
        <p-button label="View Report" [text]="true" severity="secondary"></p-button>
      </div>
      <div class="chart-container">
        <canvas 
          baseChart
          [data]="barChartData"
          [options]="barChartOptions"
          type="bar">
        </canvas>
      </div>
    </div>


    <!-- New Product CTA Card -->
    <div class="cta-card">
      <div class="cta-icon">
        <i class="pi pi-shopping-bag"></i>
      </div>
      <h3>New Product?</h3>
      <p>Add new items to your inventory quickly.</p>
      <p-button label="Add Product" icon="pi pi-plus"></p-button>
    </div>


  </div>


  <!-- Recent Orders Table - MOBILE RESPONSIVE VERSION -->
  <div class="orders-card" [class.expanded]="showFullTable">
    <div class="orders-header">
      <h3>Recent Orders</h3>
      <p-button 
        [label]="showFullTable ? 'Show less' : 'See all'" 
        [text]="true" 
        severity="secondary"
        (onClick)="toggleTableView()">
      </p-button>
    </div>
    
    <div class="table-wrapper">
      <!-- Mobile Simplified View (Customer names only) -->
      <div class="mobile-simple-view" *ngIf="!showFullTable">
        <div class="customer-item" *ngFor="let order of recentOrders">
          <p-avatar [label]="order.customer.charAt(0)" shape="circle" size="normal"></p-avatar>
          <span>{{ order.customer }}</span>
        </div>
      </div>

      <!-- Full Table View (All columns) -->
      <p-table 
        [value]="recentOrders" 
        [tableStyle]="{'min-width': '600px'}"
        [class.mobile-hidden]="!showFullTable">
        <ng-template pTemplate="header">
          <tr>
            <th class="col-order-id">Order ID</th>
            <th class="col-customer">Customer</th>
            <th class="col-product">Product</th>
            <th class="col-status">Status</th>
            <th class="col-amount">Amount</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-order>
          <tr>
            <td class="col-order-id">{{ order.orderId }}</td>
            <td class="col-customer">
              <div class="customer-cell">
                <p-avatar [label]="order.customer.charAt(0)" shape="circle" size="normal"></p-avatar>
                <span>{{ order.customer }}</span>
              </div>
            </td>
            <td class="col-product">{{ order.product }}</td>
            <td class="col-status">
              <p-tag [value]="order.status" [severity]="order.statusSeverity"></p-tag>
            </td>
            <td class="col-amount amount">{{ order.amount }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>


</div>
